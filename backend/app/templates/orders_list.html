{% extends "base.html" %}

{% block title %}Lista zleceń{% endblock %}

{% block content %}
  <h2>Lista zleceń</h2>

  {% if zlecenia %}
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Klient</th>
          <th>Urządzenie</th>
          <th>Nr seryjny</th>
          <th>Status</th>
          <th>Data utworzenia</th>
        </tr>
      </thead>
      <tbody>
        {% for z in zlecenia %}
          <tr>
            <td>{{ z.id_zlecenia }}</td>

            <td>
              {% if z.klient %}
                {{ z.klient.imie }} {{ z.klient.nazwisko }}
              {% else %}
                <em>brak danych</em>
              {% endif %}
            </td>

            <td>
              {% if z.urzadzenie and z.urzadzenie.typ %}
                {{ z.urzadzenie.typ.nazwa }}
              {% elif z.urzadzenie %}
                Urządzenie (ID: {{ z.urzadzenie.id_urzędzenia }})
              {% else %}
                <em>brak urządzenia</em>
              {% endif %}
            </td>

            <td>
              {% if z.urzadzenie and z.urzadzenie.nr_seryjny %}
                {{ z.urzadzenie.nr_seryjny }}
              {% else %}
                <em>brak nr seryjnego</em>
              {% endif %}
            </td>

            <td>{{ z.status or "brak" }}</td>

            <td>
              {% if z.data_utworzenia %}
                {{ z.data_utworzenia.strftime('%Y-%m-%d') }}
              {% else %}
                <em>brak daty</em>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Brak zleceń w systemie.</p>
  {% endif %}
{% endblock %}
